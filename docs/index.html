<!DOCTYPE html>
<html>


<head>
  <meta charset="utf-8">

  <style>@use postcss-cssnext;
@import url(https://fonts.googleapis.com/css?family=Open+Sans:400,600);

:root {
    --ad-Color-prim: #111;
    --ad-Color-sec: #00E676;
    --ad-Color-del: #E53935;
}

html {
    font-size: 16px;
    font-family: "Open Sans", sans-serif;
}

html,
body {
    height: 100%;
}

.ad-App {
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

/* main layout */
.ad-Container {
    height: 100%;
    width: 100%;
    display: flex;
    background: #fff;
}
    .ad-Container-main {
        height: 100%;
        flex: 1;
        display: flex;
        flex-direction: column;
    }
        .ad-Container-svg {
            height: 100%;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f3f3f3;
        }

    .ad-Container-controls {
        overflow: hidden;
        display: flex;
        flex-direction: column;
        height: 100%;
        width: 20rem;
        background: var(--ad-Color-prim);
    }
    .ad-Container-controls ::-webkit-scrollbar {
        width: 6px;
    }
    .ad-Container-controls ::-webkit-scrollbar-thumb {
        border-radius: 30px;
        background: rgba(255, 255, 255, .3);
    }

.ad-Foot {
    padding: 1.5rem 2rem;
    display: flex;
    background: #fff;
    border-top: 2px solid #eee;
}
    .ad-Foot-list {
        flex: 1;
    }
        .ad-Foot-item {
            text-transform: uppercase;
            font-size: .7rem;
            color: var(--ad-Color-prim);
        }
        .ad-Foot-item + .ad-Foot-item {
            margin-top: .5rem;
        }
            .ad-Foot-highlight {
                padding-bottom: .04rem;
                border-bottom: 2px solid var(--ad-Color-sec);
                font-weight: bold;
            }

    .ad-Foot-meta {
        margin-left: 2rem;
        text-align: right;
        line-height: 1.4;
        font-size: .7rem;
        color: var(--ad-Color-prim);
    }
        .ad-Foot-meta a {
            text-decoration: underline;
            color: var(--ad-Color-prim);
        }


.ad-SVG {
    display: block;
    background: #fff;
    border-radius: 4px;
}
    .ad-Grid {
        fill: none;
        stroke: #eee;
        stroke-width: 1px;
    }
    .ad-Grid.is-hidden {
        opacity: 0;
    }
    .ad-Path {
        fill: none;
        stroke: #555;
        stroke-width: 4px;
        stroke-linecap: round;
    }
    .ad-Point {
        cursor: pointer;
        fill: #fff;
        stroke: #555;
        stroke-width: 5px;
        transition: fill .2s;
    }
    .ad-Point:hover,
    .ad-PointGroup.is-active .ad-Point {
        fill: var(--ad-Color-sec);
    }
    .ad-PointGroup--first .ad-Point {
        stroke: var(--ad-Color-sec);
    }
    .ad-Anchor {
        opacity: .5;
    }
    .ad-PointGroup.is-active .ad-Anchor {
        opacity: 1;
    }
        .ad-Anchor-point {
            cursor: pointer;
            fill: #fff;
            stroke: #888;
            stroke-width: 5px;
        }
        .ad-Anchor-line {
            stroke: #888;
            stroke-width: 1px;
            stroke-dasharray: 5 5;
        }

/* controls on the right */
.ad-Controls {
    overflow: auto;
    flex: 1;
    padding: 2rem;
}
    .ad-Controls :first-child {
        margin-top: 0;
    }
    .ad-Controls-title {
        margin: 3rem 0 1.5rem;
        font-size: .8rem;
        font-weight: bold;
        color: #fff;
    }
        .ad-Controls-container {
            display: flex;
        }
        .ad-Controls-container + .ad-Controls-container {
            margin-top: 1.5rem;
        }

.ad-Control {
    flex: 1;
}
    .ad-Control-label {
        display: block;
        margin-bottom: .5rem;
        text-transform: uppercase;
        font-size: .6rem;
        font-weight: bold;
        color: color(var(--ad-Color-prim) l(+75%));
    }

.ad-Result {
    height: 5rem;
    padding: 1.4rem 1.6rem;
    background: var(--ad-Color-prim);
    box-shadow: 0 -5px 10px rgba(0, 0, 0, .4);
}
    .ad-Result-textarea {
        height: 100%;
        width: 100%;
        resize: none;
        border: none;
        background: none;
        text-transform: uppercase;
        font-family: "Open Sans", sans-serif;
        font-size: .7rem;
        font-weight: bold;
        line-height: 1.8;
        color: #fff;
    }
    .ad-Result-textarea:focus {
        outline: 0;
    }

/* control elements */
.ad-Button {
    padding: .8rem 1.4rem;
    background: var(--ad-Color-sec);
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: background .2s;
    text-transform: uppercase;
    font-family: "Open Sans", sans-serif;
    font-weight: bold;
    font-size: .6rem;
    letter-spacing: .08rem;
    color: #fff;
}
.ad-Button:focus,
.ad-Button:hover {
    outline: 0;
    background: color(var(--ad-Color-sec) l(+5%));
}
.ad-Button--delete {
    background: var(--ad-Color-del);
}
.ad-Button--delete:focus,
.ad-Button--delete:hover {
    background: color(var(--ad-Color-del) l(+5%));
}
.ad-Button--reset {
    background: color(var(--ad-Color-prim) l(+10%));
}
.ad-Button--reset:focus,
.ad-Button--reset:hover {
    background: color(var(--ad-Color-prim) l(+15%));
}

.ad-Text {
    height: 18px;
    width: 2rem;
    background: color(var(--ad-Color-prim) l(+10%));
    border: none;
    border-radius: 4px;
    text-align: center;
    font-family: "Open Sans", sans-serif;
    font-size: .6rem;
    color: #fff;
}
.ad-Text:focus {
    outline: 0;
    background: color(var(--ad-Color-prim) l(+20%));
}

.ad-Checkbox-input {
    display: none;
}
.ad-Checkbox-fake {
    position: relative;
    height: 14px;
    width: 2rem;
    background: color(var(--ad-Color-prim) l(+10%));
    border-radius: 30px;
}
.ad-Checkbox-fake::after {
    content: "";
    box-sizing: border-box;
    display: block;
    position: absolute;
    top: -2px;
    left: 0;
    height: 18px;
    width: 18px;
    cursor: pointer;
    border: 4px solid #fff;
    background: color(var(--ad-Color-prim) l(+10%));
    border-radius: 50%;
}
.ad-Checkbox-input:checked + .ad-Checkbox-fake::after {
    left: auto;
    right: 0;
    border-color: var(--ad-Color-sec);
}

.ad-Choices {
    display: flex;
    width: 12rem;
}
    .ad-Choice {
        flex: 1;
    }
        .ad-Choice-input {
            display: none;
        }
        .ad-Choice-fake {
            padding: .6rem;
            background: color(var(--ad-Color-prim) l(+10%));
            border: 4px solid transparent;
            transition: border .2s;
            cursor: pointer;
            text-align: center;
            text-transform: uppercase;
            font-family: "Open Sans", sans-serif;
            font-size: .8rem;
            font-weight: bold;
            color: #fff;
        }
        .ad-Choice:first-child .ad-Choice-fake {
            border-radius: 4px 0 0 4px;
        }
        .ad-Choice:last-child .ad-Choice-fake {
            border-radius: 0 4px 4px 0;
        }
        .ad-Choice-input:checked + .ad-Choice-fake {
            border-color: var(--ad-Color-sec);
        }

.ad-Range {
    display: flex;
    align-items: center;
}
    .ad-Range-text {
        margin-left: .5rem;
    }
    .ad-Range-input {
        width: 100%;
        height: 14px;
        appearance: none;
        border-radius: 30px;
        background: color(var(--ad-Color-prim) l(+10%));
    }
    .ad-Range-input:focus {
        outline: 0;
        background: color(var(--ad-Color-prim) l(+20%));
    }
    /* thumb */
    .ad-Range-input::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        border: 4px solid #fff;
        background: color(var(--ad-Color-prim) l(+10%));
        border-radius: 50%;
        cursor: pointer;
        transition: border .2s;
    }
    .ad-Range-input::-moz-range-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        border: 4px solid #fff;
        background: color(var(--ad-Color-prim) l(+10%));
        border-radius: 50%;
        cursor: pointer;
        transition: border .2s;
    }

    .ad-Range-input:hover::-webkit-slider-thumb,
    .ad-Range-input:focus::-webkit-slider-thumb {
        border-color: var(--ad-Color-sec);
    }
    .ad-Range-input:hover::-moz-range-thumb,
    .ad-Range-input:focus::-moz-range-thumb {
        border-color: var(--ad-Color-sec);
    }
</style>
  <title>Animation Creator</title>
</head>

<body>
  <div id="app" class="ad-App">
  </div>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.min.js"></script>
  <script type="text/javascript">"use strict";

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var StateStore =
/*#__PURE__*/
function () {
  function StateStore() {
    _classCallCheck(this, StateStore);
  }

  _createClass(StateStore, [{
    key: "loadDefaults",
    value: function loadDefaults() {
      var defaultPoints = [{
        x: 100,
        y: 300
      }, {
        x: 200,
        y: 300,
        q: {
          x: 150,
          y: 50
        }
      }, {
        x: 300,
        y: 300,
        q: {
          x: 250,
          y: 550
        }
      }, {
        x: 400,
        y: 300,
        q: {
          x: 350,
          y: 50
        }
      }, {
        x: 500,
        y: 300,
        c: [{
          x: 450,
          y: 550
        }, {
          x: 450,
          y: 50
        }]
      }, {
        x: 600,
        y: 300,
        c: [{
          x: 550,
          y: 50
        }, {
          x: 550,
          y: 550
        }]
      }, {
        x: 700,
        y: 300,
        a: {
          rx: 50,
          ry: 50,
          rot: 0,
          laf: 1,
          sf: 1
        }
      }];
      return {
        w: 800,
        h: 600,
        grid: {
          show: true,
          snap: true,
          size: 50
        },
        shiftKey: false,
        points: defaultPoints,
        activePoint: defaultPoints.length - 1,
        draggedPoint: false,
        draggedQuadratic: false,
        draggedCubic: false,
        closePath: false
      };
    }
  }, {
    key: "load",
    value: function load() {
      try {
        var state = JSON.parse(localStorage.getItem('state')).state;

        if (state) {
          return state;
        }

        return this.loadDefaults();
      } catch (e) {
        return this.loadDefaults();
      }
    }
  }, {
    key: "store",
    value: function store(state) {
      localStorage.setItem('state', JSON.stringify({
        state: state
      }));
    }
  }]);

  return StateStore;
}();

window.StateStore = StateStore;</script>
  <script type="text/javascript">"use strict";

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var Component = React.Component;
var render = ReactDOM.render;
var stateStore = new StateStore();

var Container =
/*#__PURE__*/
function (_Component) {
  _inherits(Container, _Component);

  function Container() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, Container);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Container)).call.apply(_getPrototypeOf2, [this].concat(args)));

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "state", stateStore.load());

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setWidth", function (e) {
      var v = _this.positiveNumber(e.target.value),
          min = 1;

      if (v < min) v = min;

      _this.setState({
        w: v
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setHeight", function (e) {
      var v = _this.positiveNumber(e.target.value),
          min = 1;

      if (v < min) v = min;

      _this.setState({
        h: v
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setGridSize", function (e) {
      var grid = _this.state.grid;

      var v = _this.positiveNumber(e.target.value);

      var min = 1;
      var max = Math.min(_this.state.w, _this.state.h);
      if (v < min) v = min;
      if (v >= max) v = max / 2;
      grid.size = v;

      _this.setState({
        grid: grid
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setGridSnap", function (e) {
      var grid = _this.state.grid;
      grid.snap = e.target.checked;

      _this.setState({
        grid: grid
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setGridShow", function (e) {
      var grid = _this.state.grid;
      grid.show = e.target.checked;

      _this.setState({
        grid: grid
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setClosePath", function (e) {
      _this.setState({
        closePath: e.target.checked
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "getMouseCoords", function (e) {
      var rect = ReactDOM.findDOMNode(_this.refs.svg).getBoundingClientRect();
      var x = Math.round(e.pageX - rect.left);
      var y = Math.round(e.pageY - rect.top);

      if (_this.state.grid.snap) {
        x = _this.state.grid.size * Math.round(x / _this.state.grid.size);
        y = _this.state.grid.size * Math.round(y / _this.state.grid.size);
      }

      return {
        x: x,
        y: y
      };
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setPointType", function (e) {
      var points = _this.state.points;
      var active = _this.state.activePoint; // not the first point

      if (active !== 0) {
        var v = e.target.value;

        switch (v) {
          case "l":
            points[active] = {
              x: points[active].x,
              y: points[active].y
            };
            break;

          case "q":
            points[active] = {
              x: points[active].x,
              y: points[active].y,
              q: {
                x: (points[active].x + points[active - 1].x) / 2,
                y: (points[active].y + points[active - 1].y) / 2
              }
            };
            break;

          case "c":
            points[active] = {
              x: points[active].x,
              y: points[active].y,
              c: [{
                x: (points[active].x + points[active - 1].x - 50) / 2,
                y: (points[active].y + points[active - 1].y) / 2
              }, {
                x: (points[active].x + points[active - 1].x + 50) / 2,
                y: (points[active].y + points[active - 1].y) / 2
              }]
            };
            break;

          case "a":
            points[active] = {
              x: points[active].x,
              y: points[active].y,
              a: {
                rx: 50,
                ry: 50,
                rot: 0,
                laf: 1,
                sf: 1
              }
            };
            break;
        }

        _this.setState({
          points: points
        });
      }
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setPointPosition", function (coord, e) {
      var coords = _this.state.points[_this.state.activePoint];

      var v = _this.positiveNumber(e.target.value);

      if (coord === "x" && v > _this.state.w) v = _this.state.w;
      if (coord === "y" && v > _this.state.h) v = _this.state.h;
      coords[coord] = v;

      _this.setPointCoords(coords);
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setQuadraticPosition", function (coord, e) {
      var coords = _this.state.points[_this.state.activePoint].q;

      var v = _this.positiveNumber(e.target.value);

      if (coord === "x" && v > _this.state.w) v = _this.state.w;
      if (coord === "y" && v > _this.state.h) v = _this.state.h;
      coords[coord] = v;

      _this.setQuadraticCoords(coords);
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setCubicPosition", function (coord, anchor, e) {
      var coords = _this.state.points[_this.state.activePoint].c[anchor];

      var v = _this.positiveNumber(e.target.value);

      if (coord === "x" && v > _this.state.w) v = _this.state.w;
      if (coord === "y" && v > _this.state.h) v = _this.state.h;
      coords[coord] = v;

      _this.setCubicCoords(coords, anchor);
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setPointCoords", function (coords) {
      var points = _this.state.points;
      var active = _this.state.activePoint;
      points[active].x = coords.x;
      points[active].y = coords.y;

      _this.setState({
        points: points
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setQuadraticCoords", function (coords) {
      var points = _this.state.points;
      var active = _this.state.activePoint;
      points[active].q.x = coords.x;
      points[active].q.y = coords.y;

      _this.setState({
        points: points
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setArcParam", function (param, e) {
      var points = _this.state.points;
      var active = _this.state.activePoint;
      var v;

      if (["laf", "sf"].indexOf(param) > -1) {
        v = e.target.checked ? 1 : 0;
      } else {
        v = _this.positiveNumber(e.target.value);
      }

      points[active].a[param] = v;

      _this.setState({
        points: points
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setCubicCoords", function (coords, anchor) {
      var points = _this.state.points;
      var active = _this.state.activePoint;
      points[active].c[anchor].x = coords.x;
      points[active].c[anchor].y = coords.y;

      _this.setState({
        points: points
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setDraggedPoint", function (index) {
      if (!_this.state.shiftKey) {
        _this.setState({
          activePoint: index,
          draggedPoint: true
        });
      }
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setDraggedQuadratic", function (index) {
      if (!_this.state.shiftKey) {
        _this.setState({
          activePoint: index,
          draggedQuadratic: true
        });
      }
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "setDraggedCubic", function (index, anchor) {
      if (!_this.state.shiftKey) {
        _this.setState({
          activePoint: index,
          draggedCubic: anchor
        });
      }
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "cancelDragging", function (e) {
      _this.setState({
        draggedPoint: false,
        draggedQuadratic: false,
        draggedCubic: false
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "addPoint", function (e) {
      if (_this.state.shiftKey) {
        var coords = _this.getMouseCoords(e);

        var points = _this.state.points;
        points.push(coords);

        _this.setState({
          points: points,
          activePoint: points.length - 1
        });
      }
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "removeActivePoint", function (e) {
      var points = _this.state.points;
      var active = _this.state.activePoint;

      if (points.length > 1 && active !== 0) {
        points.splice(active, 1);

        _this.setState({
          points: points,
          activePoint: points.length - 1
        });
      }
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "handleMouseMove", function (e) {
      if (!_this.state.shiftKey) {
        if (_this.state.draggedPoint) {
          _this.setPointCoords(_this.getMouseCoords(e));
        } else if (_this.state.draggedQuadratic) {
          _this.setQuadraticCoords(_this.getMouseCoords(e));
        } else if (_this.state.draggedCubic !== false) {
          _this.setCubicCoords(_this.getMouseCoords(e), _this.state.draggedCubic);
        }
      }
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "handleKeyDown", function (e) {
      if (e.shiftKey) _this.setState({
        shiftKey: true
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "handleKeyUp", function (e) {
      if (!e.shiftKey) _this.setState({
        shiftKey: false
      });
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "reset", function (e) {
      var state = _this.state;
      var w = state.w;
      var h = state.h;
      var points = _this.state.points;
      points.splice(0, points.length);
      points.push({
        x: w / 2,
        y: h / 2
      });
      state.points = points;
      state.activePoint = points.length - 1;

      _this.setState(state);
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "restoreDefaults", function (e) {
      var defaultState = stateStore.loadDefaults();
      var state = _this.state;

      for (var k in defaultState) {
        state[k] = defaultState[k];
      }

      _this.setState(state);
    });

    return _this;
  }

  _createClass(Container, [{
    key: "componentWillMount",
    value: function componentWillMount() {
      document.addEventListener("keydown", this.handleKeyDown, false);
      document.addEventListener("keyup", this.handleKeyUp, false);
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      document.removeEventListener("keydown");
      document.removeEventListener("keyup");
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps, prevState) {
      stateStore.store(prevState);
    }
  }, {
    key: "positiveNumber",
    value: function positiveNumber(n) {
      n = parseInt(n);
      if (isNaN(n) || n < 0) n = 0;
      return n;
    }
  }, {
    key: "generatePath",
    value: function generatePath() {
      var _this$state = this.state,
          points = _this$state.points,
          closePath = _this$state.closePath;
      var d = "";
      points.forEach(function (p, i) {
        if (i === 0) {
          // first point
          d += "M ";
        } else if (p.q) {
          // quadratic
          d += "Q ".concat(p.q.x, " ").concat(p.q.y, " ");
        } else if (p.c) {
          // cubic
          d += "C ".concat(p.c[0].x, " ").concat(p.c[0].y, " ").concat(p.c[1].x, " ").concat(p.c[1].y, " ");
        } else if (p.a) {
          // arc
          d += "A ".concat(p.a.rx, " ").concat(p.a.ry, " ").concat(p.a.rot, " ").concat(p.a.laf, " ").concat(p.a.sf, " ");
        } else {
          d += "L ";
        }

        d += "".concat(p.x, " ").concat(p.y, " ");
      });
      if (closePath) d += "Z";
      return d;
    }
  }, {
    key: "render",
    value: function render() {
      return React.createElement("div", {
        className: "ad-Container",
        onMouseUp: this.cancelDragging
      }, React.createElement("div", {
        className: "ad-Container-main"
      }, React.createElement("div", {
        className: "ad-Container-svg"
      }, React.createElement(SVG, _extends({
        ref: "svg",
        path: this.generatePath()
      }, this.state, {
        addPoint: this.addPoint,
        setDraggedPoint: this.setDraggedPoint,
        setDraggedQuadratic: this.setDraggedQuadratic,
        setDraggedCubic: this.setDraggedCubic,
        handleMouseMove: this.handleMouseMove
      }))), React.createElement(Foot, null)), React.createElement("div", {
        className: "ad-Container-controls"
      }, React.createElement(Controls, _extends({}, this.state, {
        reset: this.reset,
        restoreDefaults: this.restoreDefaults,
        removeActivePoint: this.removeActivePoint,
        setPointPosition: this.setPointPosition,
        setQuadraticPosition: this.setQuadraticPosition,
        setCubicPosition: this.setCubicPosition,
        setArcParam: this.setArcParam,
        setPointType: this.setPointType,
        setWidth: this.setWidth,
        setHeight: this.setHeight,
        setGridSize: this.setGridSize,
        setGridSnap: this.setGridSnap,
        setGridShow: this.setGridShow,
        setClosePath: this.setClosePath
      })), React.createElement(Result, {
        path: this.generatePath()
      })));
    }
  }]);

  return Container;
}(Component);

function Foot(props) {
  return React.createElement("div", {
    className: "ad-Foot"
  }, React.createElement("ul", {
    className: "ad-Foot-list"
  }, React.createElement("li", {
    className: "ad-Foot-item"
  }, React.createElement("span", {
    className: "ad-Foot-highlight"
  }, "Click"), " to select a point"), React.createElement("li", {
    className: "ad-Foot-item"
  }, React.createElement("span", {
    className: "ad-Foot-highlight"
  }, "Shift + Click"), " to add a point")), React.createElement("div", {
    className: "ad-Foot-meta"
  }, "Built by ", React.createElement("a", {
    href: "https://github.com/anthonydugois"
  }, "anthonydugois"), React.createElement("br", null), "Enhanced by ", React.createElement("a", {
    href: "https://github.com/dclaze"
  }, "dclaze"), React.createElement("br", null)));
}

function Result(props) {
  return React.createElement("div", {
    className: "ad-Result"
  }, React.createElement("textarea", {
    className: "ad-Result-textarea",
    value: props.path,
    onFocus: function onFocus(e) {
      return e.target.select();
    }
  }));
}
/**
 * SVG rendering
 */


var SVG =
/*#__PURE__*/
function (_Component2) {
  _inherits(SVG, _Component2);

  function SVG() {
    _classCallCheck(this, SVG);

    return _possibleConstructorReturn(this, _getPrototypeOf(SVG).apply(this, arguments));
  }

  _createClass(SVG, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          path = _this$props.path,
          w = _this$props.w,
          h = _this$props.h,
          grid = _this$props.grid,
          points = _this$props.points,
          activePoint = _this$props.activePoint,
          addPoint = _this$props.addPoint,
          handleMouseMove = _this$props.handleMouseMove,
          setDraggedPoint = _this$props.setDraggedPoint,
          setDraggedQuadratic = _this$props.setDraggedQuadratic,
          setDraggedCubic = _this$props.setDraggedCubic;
      var circles = points.map(function (p, i, a) {
        var anchors = [];

        if (p.q) {
          anchors.push(React.createElement(Quadratic, {
            index: i,
            p1x: a[i - 1].x,
            p1y: a[i - 1].y,
            p2x: p.x,
            p2y: p.y,
            x: p.q.x,
            y: p.q.y,
            setDraggedQuadratic: setDraggedQuadratic
          }));
        } else if (p.c) {
          anchors.push(React.createElement(Cubic, {
            index: i,
            p1x: a[i - 1].x,
            p1y: a[i - 1].y,
            p2x: p.x,
            p2y: p.y,
            x1: p.c[0].x,
            y1: p.c[0].y,
            x2: p.c[1].x,
            y2: p.c[1].y,
            setDraggedCubic: setDraggedCubic
          }));
        }

        return React.createElement("g", {
          className: "ad-PointGroup" + (i === 0 ? "  ad-PointGroup--first" : "") + (activePoint === i ? "  is-active" : "")
        }, React.createElement(Point, {
          index: i,
          x: p.x,
          y: p.y,
          setDraggedPoint: setDraggedPoint
        }), anchors);
      });
      return React.createElement("svg", {
        className: "ad-SVG",
        width: w,
        height: h,
        onClick: function onClick(e) {
          return addPoint(e);
        },
        onMouseMove: function onMouseMove(e) {
          return handleMouseMove(e);
        }
      }, React.createElement(Grid, {
        w: w,
        h: h,
        grid: grid
      }), React.createElement("path", {
        className: "ad-Path",
        d: path
      }), React.createElement("g", {
        className: "ad-Points"
      }, circles));
    }
  }]);

  return SVG;
}(Component);

function Cubic(props) {
  return React.createElement("g", {
    className: "ad-Anchor"
  }, React.createElement("line", {
    className: "ad-Anchor-line",
    x1: props.p1x,
    y1: props.p1y,
    x2: props.x1,
    y2: props.y1
  }), React.createElement("line", {
    className: "ad-Anchor-line",
    x1: props.p2x,
    y1: props.p2y,
    x2: props.x2,
    y2: props.y2
  }), React.createElement("circle", {
    className: "ad-Anchor-point",
    onMouseDown: function onMouseDown(e) {
      return props.setDraggedCubic(props.index, 0);
    },
    cx: props.x1,
    cy: props.y1,
    r: 6
  }), React.createElement("circle", {
    className: "ad-Anchor-point",
    onMouseDown: function onMouseDown(e) {
      return props.setDraggedCubic(props.index, 1);
    },
    cx: props.x2,
    cy: props.y2,
    r: 6
  }));
}

function Quadratic(props) {
  return React.createElement("g", {
    className: "ad-Anchor"
  }, React.createElement("line", {
    className: "ad-Anchor-line",
    x1: props.p1x,
    y1: props.p1y,
    x2: props.x,
    y2: props.y
  }), React.createElement("line", {
    className: "ad-Anchor-line",
    x1: props.x,
    y1: props.y,
    x2: props.p2x,
    y2: props.p2y
  }), React.createElement("circle", {
    className: "ad-Anchor-point",
    onMouseDown: function onMouseDown(e) {
      return props.setDraggedQuadratic(props.index);
    },
    cx: props.x,
    cy: props.y,
    r: 6
  }));
}

function Point(props) {
  return React.createElement("circle", {
    className: "ad-Point",
    onMouseDown: function onMouseDown(e) {
      return props.setDraggedPoint(props.index);
    },
    cx: props.x,
    cy: props.y,
    r: 8
  });
}

function Grid(props) {
  var _props$grid = props.grid,
      show = _props$grid.show,
      snap = _props$grid.snap,
      size = _props$grid.size;
  var grid = [];

  for (var i = 1; i < props.w / size; i++) {
    grid.push(React.createElement("line", {
      x1: i * size,
      y1: 0,
      x2: i * size,
      y2: props.h
    }));
  }

  for (var _i = 1; _i < props.h / size; _i++) {
    grid.push(React.createElement("line", {
      x1: 0,
      y1: _i * size,
      x2: props.w,
      y2: _i * size
    }));
  }

  return React.createElement("g", {
    className: "ad-Grid" + (!show ? "  is-hidden" : "")
  }, grid);
}
/**
 * Controls
 */


function Controls(props) {
  var active = props.points[props.activePoint];
  var step = props.grid.snap ? props.grid.size : 1;
  var params = [];

  if (active.q) {
    params.push(React.createElement("div", {
      className: "ad-Controls-container"
    }, React.createElement(Control, {
      name: "Control point X position",
      type: "range",
      min: 0,
      max: props.w,
      step: step,
      value: active.q.x,
      onChange: function onChange(e) {
        return props.setQuadraticPosition("x", e);
      }
    })));
    params.push(React.createElement("div", {
      className: "ad-Controls-container"
    }, React.createElement(Control, {
      name: "Control point Y position",
      type: "range",
      min: 0,
      max: props.h,
      step: step,
      value: active.q.y,
      onChange: function onChange(e) {
        return props.setQuadraticPosition("y", e);
      }
    })));
  } else if (active.c) {
    params.push(React.createElement("div", {
      className: "ad-Controls-container"
    }, React.createElement(Control, {
      name: "First control point X position",
      type: "range",
      min: 0,
      max: props.w,
      step: step,
      value: active.c[0].x,
      onChange: function onChange(e) {
        return props.setCubicPosition("x", 0, e);
      }
    })));
    params.push(React.createElement("div", {
      className: "ad-Controls-container"
    }, React.createElement(Control, {
      name: "First control point Y position",
      type: "range",
      min: 0,
      max: props.h,
      step: step,
      value: active.c[0].y,
      onChange: function onChange(e) {
        return props.setCubicPosition("y", 0, e);
      }
    })));
    params.push(React.createElement("div", {
      className: "ad-Controls-container"
    }, React.createElement(Control, {
      name: "Second control point X position",
      type: "range",
      min: 0,
      max: props.w,
      step: step,
      value: active.c[1].x,
      onChange: function onChange(e) {
        return props.setCubicPosition("x", 1, e);
      }
    })));
    params.push(React.createElement("div", {
      className: "ad-Controls-container"
    }, React.createElement(Control, {
      name: "Second control point Y position",
      type: "range",
      min: 0,
      max: props.h,
      step: step,
      value: active.c[1].y,
      onChange: function onChange(e) {
        return props.setCubicPosition("y", 1, e);
      }
    })));
  } else if (active.a) {
    params.push(React.createElement("div", {
      className: "ad-Controls-container"
    }, React.createElement(Control, {
      name: "X Radius",
      type: "range",
      min: 0,
      max: props.w,
      step: step,
      value: active.a.rx,
      onChange: function onChange(e) {
        return props.setArcParam("rx", e);
      }
    })));
    params.push(React.createElement("div", {
      className: "ad-Controls-container"
    }, React.createElement(Control, {
      name: "Y Radius",
      type: "range",
      min: 0,
      max: props.h,
      step: step,
      value: active.a.ry,
      onChange: function onChange(e) {
        return props.setArcParam("ry", e);
      }
    })));
    params.push(React.createElement("div", {
      className: "ad-Controls-container"
    }, React.createElement(Control, {
      name: "Rotation",
      type: "range",
      min: 0,
      max: 360,
      step: 1,
      value: active.a.rot,
      onChange: function onChange(e) {
        return props.setArcParam("rot", e);
      }
    })));
    params.push(React.createElement("div", {
      className: "ad-Controls-container"
    }, React.createElement(Control, {
      name: "Large arc sweep flag",
      type: "checkbox",
      checked: active.a.laf,
      onChange: function onChange(e) {
        return props.setArcParam("laf", e);
      }
    })));
    params.push(React.createElement("div", {
      className: "ad-Controls-container"
    }, React.createElement(Control, {
      name: "Sweep flag",
      type: "checkbox",
      checked: active.a.sf,
      onChange: function onChange(e) {
        return props.setArcParam("sf", e);
      }
    })));
  }

  return React.createElement("div", {
    className: "ad-Controls"
  }, React.createElement("h3", {
    className: "ad-Controls-title"
  }, "Parameters"), React.createElement("div", {
    className: "ad-Controls-container"
  }, React.createElement(Control, {
    name: "Width",
    type: "text",
    value: props.w,
    onChange: function onChange(e) {
      return props.setWidth(e);
    }
  }), React.createElement(Control, {
    name: "Height",
    type: "text",
    value: props.h,
    onChange: function onChange(e) {
      return props.setHeight(e);
    }
  }), React.createElement(Control, {
    name: "Close path",
    type: "checkbox",
    value: props.closePath,
    onChange: function onChange(e) {
      return props.setClosePath(e);
    }
  })), React.createElement("div", {
    className: "ad-Controls-container"
  }, React.createElement(Control, {
    name: "Grid size",
    type: "text",
    value: props.grid.size,
    onChange: function onChange(e) {
      return props.setGridSize(e);
    }
  }), React.createElement(Control, {
    name: "Snap grid",
    type: "checkbox",
    checked: props.grid.snap,
    onChange: function onChange(e) {
      return props.setGridSnap(e);
    }
  }), React.createElement(Control, {
    name: "Show grid",
    type: "checkbox",
    checked: props.grid.show,
    onChange: function onChange(e) {
      return props.setGridShow(e);
    }
  })), React.createElement("div", {
    className: "ad-Controls-container"
  }, React.createElement(Control, {
    type: "button",
    action: "reset",
    value: "Reset path",
    onClick: function onClick(e) {
      return props.reset(e);
    }
  }), React.createElement(Control, {
    type: "button",
    action: "reset",
    value: "Restore Defaults",
    onClick: function onClick(e) {
      return props.restoreDefaults(e);
    }
  })), React.createElement("h3", {
    className: "ad-Controls-title"
  }, "Selected point"), props.activePoint !== 0 && React.createElement("div", {
    className: "ad-Controls-container"
  }, React.createElement(Control, {
    name: "Point type",
    type: "choices",
    id: "pointType",
    choices: [{
      name: "L",
      value: "l",
      checked: !active.q && !active.c && !active.a
    }, {
      name: "Q",
      value: "q",
      checked: !!active.q
    }, {
      name: "C",
      value: "c",
      checked: !!active.c
    }, {
      name: "A",
      value: "a",
      checked: !!active.a
    }],
    onChange: function onChange(e) {
      return props.setPointType(e);
    }
  })), React.createElement("div", {
    className: "ad-Controls-container"
  }, React.createElement(Control, {
    name: "Point X position",
    type: "range",
    min: 0,
    max: props.w,
    step: step,
    value: active.x,
    onChange: function onChange(e) {
      return props.setPointPosition("x", e);
    }
  })), React.createElement("div", {
    className: "ad-Controls-container"
  }, React.createElement(Control, {
    name: "Point Y position",
    type: "range",
    min: 0,
    max: props.h,
    step: step,
    value: active.y,
    onChange: function onChange(e) {
      return props.setPointPosition("y", e);
    }
  })), params, props.activePoint !== 0 && React.createElement("div", {
    className: "ad-Controls-container"
  }, React.createElement(Control, {
    type: "button",
    action: "delete",
    value: "Remove this point",
    onClick: function onClick(e) {
      return props.removeActivePoint(e);
    }
  })));
}

function Control(props) {
  var name = props.name,
      type = props.type,
      _props = _objectWithoutProperties(props, ["name", "type"]);

  var control = "",
      label = "";

  switch (type) {
    case "range":
      control = React.createElement(Range, _props);
      break;

    case "text":
      control = React.createElement(Text, _props);
      break;

    case "checkbox":
      control = React.createElement(Checkbox, _props);
      break;

    case "button":
      control = React.createElement(Button, _props);
      break;

    case "choices":
      control = React.createElement(Choices, _props);
      break;
  }

  if (name) {
    label = React.createElement("label", {
      className: "ad-Control-label"
    }, name);
  }

  return React.createElement("div", {
    className: "ad-Control"
  }, label, control);
}

function Choices(props) {
  var choices = props.choices.map(function (c, i) {
    return React.createElement("label", {
      className: "ad-Choice"
    }, React.createElement("input", {
      className: "ad-Choice-input",
      type: "radio",
      value: c.value,
      checked: c.checked,
      name: props.id,
      onChange: props.onChange
    }), React.createElement("div", {
      className: "ad-Choice-fake"
    }, c.name));
  });
  return React.createElement("div", {
    className: "ad-Choices"
  }, choices);
}

function Button(props) {
  return React.createElement("button", {
    className: "ad-Button" + (props.action ? "  ad-Button--" + props.action : ""),
    type: "button",
    onClick: props.onClick
  }, props.value);
}

function Checkbox(props) {
  return React.createElement("label", {
    className: "ad-Checkbox"
  }, React.createElement("input", {
    className: "ad-Checkbox-input",
    type: "checkbox",
    onChange: props.onChange,
    checked: props.checked
  }), React.createElement("div", {
    className: "ad-Checkbox-fake"
  }));
}

function Text(props) {
  return React.createElement("input", {
    className: "ad-Text",
    type: "text",
    value: props.value,
    onChange: props.onChange
  });
}

function Range(props) {
  return React.createElement("div", {
    className: "ad-Range"
  }, React.createElement("input", {
    className: "ad-Range-input",
    type: "range",
    min: props.min,
    max: props.max,
    step: props.step,
    value: props.value,
    onChange: props.onChange
  }), React.createElement("input", {
    className: "ad-Range-text  ad-Text",
    type: "text",
    value: props.value,
    onChange: props.onChange
  }));
}

render(React.createElement(Container, null), document.querySelector("#app"));</script>
</body>



